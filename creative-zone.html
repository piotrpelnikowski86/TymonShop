<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strefa Kreatywna - TymonTeam</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        .drawing-canvas {
            border: 3px solid var(--primary);
            border-radius: var(--radius-md);
            background: white;
            display: block;
            margin: var(--spacing-lg) auto;
            box-shadow: var(--shadow-lg);
            cursor: crosshair;
        }

        .color-palette {
            display: flex;
            gap: var(--spacing-sm);
            justify-content: center;
            margin: var(--spacing-lg) 0;
        }

        .color-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .color-btn:hover {
            transform: scale(1.2);
        }

        .color-btn.active {
            border-width: 4px;
            border-color: var(--text-primary);
        }

        .tool-controls {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            flex-wrap: wrap;
            margin: var(--spacing-lg) 0;
        }
    </style>
</head>

<body>
    <button id="theme-toggle" class="theme-toggle">
        <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5" />
            <line x1="12" y1="1" x2="12" y2="3" />
            <line x1="12" y1="21" x2="12" y2="23" />
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
            <line x1="1" y1="12" x2="3" y2="12" />
            <line x1="21" y1="12" x2="23" y2="12" />
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </svg>
        <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
        </svg>
    </button>

    <div class="screen active">
        <header class="main-header">
            <div class="header-left">
                <button class="btn btn-icon" onclick="window.location.href='index.html'">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7" />
                    </svg>
                </button>
                <h1 class="app-title">Strefa Kreatywna</h1>
            </div>
        </header>

        <main class="main-content">
            <div class="glass-card" style="max-width: 800px; margin: 0 auto; padding: var(--spacing-xl);">
                <h2 class="section-title">Tablica do Rysowania</h2>
                <p class="text-center text-secondary">Narysuj coś kreatywnego!</p>

                <div class="color-palette">
                    <div class="color-btn active" style="background: #000000;" data-color="#000000"></div>
                    <div class="color-btn" style="background: #FF0000;" data-color="#FF0000"></div>
                    <div class="color-btn" style="background: #00FF00;" data-color="#00FF00"></div>
                    <div class="color-btn" style="background: #0000FF;" data-color="#0000FF"></div>
                    <div class="color-btn" style="background: #FFFF00;" data-color="#FFFF00"></div>
                    <div class="color-btn" style="background: #FF00FF;" data-color="#FF00FF"></div>
                    <div class="color-btn" style="background: #00FFFF;" data-color="#00FFFF"></div>
                    <div class="color-btn" style="background: #FFA500;" data-color="#FFA500"></div>
                </div>

                <canvas id="drawing-canvas" class="drawing-canvas" width="600" height="400"></canvas>

                <div class="tool-controls">
                    <div class="input-group" style="max-width: 200px;">
                        <input type="range" id="brush-size" min="1" max="20" value="3">
                        <label for="brush-size">Rozmiar pędzla: <span id="brush-size-value">3</span>px</label>
                    </div>
                </div>

                <div class="game-controls">
                    <button class="btn btn-primary" id="clear-btn">Wyczyść</button>
                    <button class="btn" id="save-btn">Zapisz Rysunek</button>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
    <script>
        class DrawingApp {
            constructor() {
                this.canvas = document.getElementById('drawing-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.isDrawing = false;
                this.currentColor = '#000000';
                this.brushSize = 3;

                this.init();
            }

            init() {
                this.ctx.fillStyle = 'white';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);

                this.setupEventListeners();
            }

            setupEventListeners() {
                // Canvas drawing
                this.canvas.addEventListener('mousedown', (e) => this.startDrawing(e));
                this.canvas.addEventListener('mousemove', (e) => this.draw(e));
                this.canvas.addEventListener('mouseup', () => this.stopDrawing());
                this.canvas.addEventListener('mouseout', () => this.stopDrawing());

                // Touch events
                this.canvas.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.startDrawing(e.touches[0]);
                });
                this.canvas.addEventListener('touchmove', (e) => {
                    e.preventDefault();
                    this.draw(e.touches[0]);
                });
                this.canvas.addEventListener('touchend', () => this.stopDrawing());

                // Color selection
                document.querySelectorAll('.color-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.currentColor = e.target.dataset.color;
                    });
                });

                // Brush size
                document.getElementById('brush-size').addEventListener('input', (e) => {
                    this.brushSize = e.target.value;
                    document.getElementById('brush-size-value').textContent = this.brushSize;
                });

                // Clear button
                document.getElementById('clear-btn').addEventListener('click', () => {
                    this.clear();
                });

                // Save button
                document.getElementById('save-btn').addEventListener('click', () => {
                    this.save();
                });
            }

            startDrawing(e) {
                this.isDrawing = true;
                this.draw(e);
            }

            stopDrawing() {
                this.isDrawing = false;
                this.ctx.beginPath();
            }

            draw(e) {
                if (!this.isDrawing) return;

                const rect = this.canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                this.ctx.lineWidth = this.brushSize;
                this.ctx.lineCap = 'round';
                this.ctx.strokeStyle = this.currentColor;

                this.ctx.lineTo(x, y);
                this.ctx.stroke();
                this.ctx.beginPath();
                this.ctx.moveTo(x, y);
            }

            clear() {
                this.ctx.fillStyle = 'white';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
            }

            save() {
                const link = document.createElement('a');
                link.download = `rysunek-${Date.now()}.png`;
                link.href = this.canvas.toDataURL();
                link.click();
            }
        }

        const drawingApp = new DrawingApp();
    </script>
</body>

</html>