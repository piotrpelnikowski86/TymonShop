<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administracyjny - TymonTeam</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
</head>

<body>
    <button id="theme-toggle" class="theme-toggle">
        <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5" />
            <line x1="12" y1="1" x2="12" y2="3" />
            <line x1="12" y1="21" x2="12" y2="23" />
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
            <line x1="1" y1="12" x2="3" y2="12" />
            <line x1="21" y1="12" x2="23" y2="12" />
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </svg>
        <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
        </svg>
    </button>

    <div class="screen active">
        <!-- Admin Login Screen -->
        <div id="admin-login-screen" class="screen active">
            <div class="container">
                <div class="glass-card" style="max-width: 500px; margin: 100px auto; padding: var(--spacing-2xl);">
                    <h2 class="section-title">Panel Administracyjny</h2>
                    <form id="admin-login-form">
                        <div class="input-group">
                            <input type="password" id="admin-password" required autocomplete="off">
                            <label for="admin-password">Hasło administratora</label>
                        </div>
                        <button type="submit" class="btn btn-primary"
                            style="width: 100%; margin-top: var(--spacing-lg);">
                            <span>Zaloguj</span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M15 12H3" />
                            </svg>
                        </button>
                        <button type="button" class="btn" style="width: 100%; margin-top: var(--spacing-md);"
                            onclick="window.location.href='index.html'">
                            Powrót
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Admin Panel Screen -->
        <div id="admin-panel-screen" class="screen" style="display: none;">
            <header class="main-header">
                <div class="header-left">
                    <button class="btn btn-icon" onclick="adminPanel.logout()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <h1 class="app-title">Panel Administracyjny</h1>
                </div>
            </header>

            <main class="main-content">
                <div class="glass-card" style="max-width: 800px; margin: 0 auto; padding: var(--spacing-xl);">
                    <h2 class="section-title">Dodaj Materiał Edukacyjny</h2>

                    <form id="material-form">
                        <div class="input-group">
                            <input type="text" id="material-title" required autocomplete="off">
                            <label for="material-title">Tytuł materiału</label>
                        </div>

                        <div class="input-group">
                            <textarea id="material-content" rows="10" required style="resize: vertical;"></textarea>
                            <label for="material-content">Treść materiału</label>
                        </div>

                        <button type="submit" class="btn btn-primary">
                            <span>Dodaj Materiał</span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 5v14M5 12h14" />
                            </svg>
                        </button>
                    </form>

                    <hr style="margin: var(--spacing-2xl) 0; border: 1px solid var(--border-color);">

                    <h3>Istniejące Materiały</h3>
                    <div id="materials-list" style="margin-top: var(--spacing-lg);"></div>
                </div>
            </main>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        class AdminPanel {
            constructor() {
                this.adminPassword = 'admin123'; // Simple password for demo
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.loadMaterials();
            }

            setupEventListeners() {
                document.getElementById('admin-login-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.login();
                });

                document.getElementById('material-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addMaterial();
                });
            }

            login() {
                const password = document.getElementById('admin-password').value;

                if (password === this.adminPassword) {
                    document.getElementById('admin-login-screen').style.display = 'none';
                    document.getElementById('admin-panel-screen').style.display = 'block';
                    this.loadMaterials();
                } else {
                    alert('Nieprawidłowe hasło!');
                }
            }

            logout() {
                document.getElementById('admin-login-screen').style.display = 'block';
                document.getElementById('admin-panel-screen').style.display = 'none';
                document.getElementById('admin-password').value = '';
            }

            addMaterial() {
                const title = document.getElementById('material-title').value;
                const content = document.getElementById('material-content').value;

                const material = {
                    id: Date.now(),
                    title: title,
                    content: content,
                    excerpt: content.substring(0, 100),
                    date: new Date().toISOString()
                };

                // Get existing materials
                const materials = JSON.parse(localStorage.getItem('tymon-materials') || '[]');
                materials.push(material);
                localStorage.setItem('tymon-materials', JSON.stringify(materials));

                // Clear form
                document.getElementById('material-title').value = '';
                document.getElementById('material-content').value = '';

                // Reload list
                this.loadMaterials();

                alert('Materiał został dodany!');
            }

            loadMaterials() {
                const materials = JSON.parse(localStorage.getItem('tymon-materials') || '[]');
                const list = document.getElementById('materials-list');

                if (materials.length === 0) {
                    list.innerHTML = '<p class="text-secondary">Brak materiałów</p>';
                    return;
                }

                list.innerHTML = materials.map((material, index) => `
                    <div class="glass-card" style="padding: var(--spacing-md); margin-bottom: var(--spacing-md);">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div>
                                <h4>${material.title}</h4>
                                <p style="font-size: var(--font-size-sm); color: var(--text-secondary); margin-top: var(--spacing-xs);">
                                    ${new Date(material.date).toLocaleDateString('pl-PL')}
                                </p>
                            </div>
                            <button class="btn" style="padding: var(--spacing-xs) var(--spacing-sm);" onclick="adminPanel.deleteMaterial(${index})">
                                Usuń
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            deleteMaterial(index) {
                if (!confirm('Czy na pewno chcesz usunąć ten materiał?')) return;

                const materials = JSON.parse(localStorage.getItem('tymon-materials') || '[]');
                materials.splice(index, 1);
                localStorage.setItem('tymon-materials', JSON.stringify(materials));

                this.loadMaterials();
            }
        }

        const adminPanel = new AdminPanel();
    </script>
</body>

</html>